"use strict";(self.webpackChunkmonster=self.webpackChunkmonster||[]).push([[773],{773:(R,d,r)=>{r.r(d),r.d(d,{AuthenticationRoutes:()=>F});var l=r(177),g=r(5464),a=r(9417),e=r(3953),v=r(9181),u=r(8292),f=r(9208),p=r(788),m=r(2540);function h(t,c){if(1&t){const i=e.RV6();e.j41(0,"div",8)(1,"div",9)(2,"div",10),e.nrm(3,"img",11),e.k0s(),e.j41(4,"span",12),e.EFF(5,"Inicia Sesi\xf3n"),e.k0s()(),e.j41(6,"div",13)(7,"div",14)(8,"form",15),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.formSubmit())}),e.j41(9,"div",16)(10,"span",17),e.nrm(11,"i",18),e.k0s(),e.j41(12,"input",19),e.mxI("ngModelChange",function(o){e.eBV(i);const s=e.XpG(2);return e.DH7(s.loginData.username,o)||(s.loginData.username=o),e.Njj(o)}),e.k0s()(),e.j41(13,"div",16)(14,"span",20),e.nrm(15,"i",21),e.k0s(),e.j41(16,"input",22),e.mxI("ngModelChange",function(o){e.eBV(i);const s=e.XpG(2);return e.DH7(s.loginData.password,o)||(s.loginData.password=o),e.Njj(o)}),e.k0s(),e.j41(17,"button",23),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.togglePasswordVisibility())}),e.nrm(18,"i",24),e.k0s()(),e.j41(19,"div",25)(20,"div",26)(21,"div",27),e.nrm(22,"input",28),e.j41(23,"label",29),e.EFF(24,"Recordar"),e.k0s(),e.j41(25,"a",30),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showRecoverForm())}),e.nrm(26,"i",31),e.EFF(27," Olvidaste la Contrase\xf1a?"),e.k0s()()()(),e.j41(28,"div",32)(29,"div",33)(30,"button",34),e.EFF(31,"Iniciar Sesi\xf3n"),e.k0s()()()()()()()}if(2&t){const i=e.XpG(2);e.R7$(12),e.R50("ngModel",i.loginData.username),e.R7$(4),e.R50("ngModel",i.loginData.password),e.Y8G("type",i.passwordVisible?"text":"password"),e.R7$(2),e.Y8G("ngClass",i.passwordVisible?"mdi-eye-off":"mdi-eye")}}function _(t,c){if(1&t){const i=e.RV6();e.j41(0,"div",13)(1,"div",38)(2,"div",10),e.nrm(3,"img",39),e.k0s(),e.j41(4,"h5",40),e.EFF(5,"Recuperar Contrase\xf1a"),e.k0s(),e.j41(6,"span"),e.EFF(7,"Ingresa tu Nombre de Usuario y te enviaremos un enlace para restablecer la contrase\xf1a"),e.k0s()(),e.j41(8,"form",41),e.bIt("ngSubmit",function(){e.eBV(i);const o=e.XpG(3);return e.Njj(o.formSubmitResetPassword())}),e.j41(9,"div",25)(10,"div",14)(11,"input",42),e.mxI("ngModelChange",function(o){e.eBV(i);const s=e.XpG(3);return e.DH7(s.recoverData.email,o)||(s.recoverData.email=o),e.Njj(o)}),e.k0s()()(),e.j41(12,"div",43)(13,"div",14)(14,"button",44),e.EFF(15,"Restablecer"),e.k0s()()()()()}if(2&t){const i=e.XpG(3);e.R7$(11),e.R50("ngModel",i.recoverData.email)}}function b(t,c){1&t&&(e.j41(0,"div",43)(1,"div",45)(2,"span"),e.nrm(3,"i",46),e.EFF(4," Se envio un correo electronico para restablecer la contrase\xf1a"),e.k0s()()())}function x(t,c){if(1&t&&(e.j41(0,"div",35),e.DNE(1,_,16,1,"div",36)(2,b,5,0,"div",37),e.k0s()),2&t){const i=e.XpG(2);e.R7$(),e.Y8G("ngIf",!i.emailEnviado),e.R7$(),e.Y8G("ngIf",i.emailEnviado)}}function j(t,c){if(1&t){const i=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showRecoverForm())}),e.j41(1,"span"),e.EFF(2,"\xd7"),e.k0s()()}}function k(t,c){if(1&t&&(e.j41(0,"div",4),e.DNE(1,h,32,4,"div",5)(2,x,3,2,"div",6)(3,j,3,0,"div",7),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngIf",!i.recoverform),e.R7$(),e.Y8G("ngIf",i.recoverform),e.R7$(),e.Y8G("ngIf",i.recoverform)}}function C(t,c){1&t&&(e.j41(0,"div",13)(1,"div",45)(2,"span"),e.nrm(3,"i",46),e.EFF(4," Se envio un correo electronico para restablecer la contrase\xf1a"),e.k0s()()())}function S(t,c){if(1&t){const i=e.RV6();e.j41(0,"div",47),e.bIt("click",function(){e.eBV(i);const o=e.XpG(2);return e.Njj(o.showRecoverForm())}),e.j41(1,"span"),e.EFF(2,"\xd7"),e.k0s()()}}function w(t,c){if(1&t&&(e.j41(0,"div",48),e.DNE(1,C,5,0,"div",49)(2,S,3,0,"div",7),e.k0s()),2&t){const i=e.XpG();e.R7$(),e.Y8G("ngIf",i.emailEnviado),e.R7$(),e.Y8G("ngIf",i.recoverform)}}const F=[{path:"",children:[{path:"login",component:(()=>{class t{constructor(i,n,o,s,D,I){this.notificationService=i,this.loginService=n,this.spinnerService=o,this.modalService=s,this.router=D,this.route=I,this.loginform=!0,this.recoverform=!1,this.emailEnviado=!1,this.passwordVisible=!1,this.loginData={username:"",password:""},this.recoverData={email:""},this.loginService.logout()}ngOnInit(){}showRecoverForm(){this.loginform=!this.loginform,this.recoverform=!this.recoverform,this.recoverData.email="",this.emailEnviado=!1}formSubmit(){""!=this.loginData.username&&null!=this.loginData.username||""!=this.loginData.password&&null!=this.loginData.password?""==this.loginData.username||null==this.loginData.username?this.notificationService.showNotification("error","Falta rellenar el campo usuario"):(""==this.loginData.password||null==this.loginData.password)&&this.notificationService.showNotification("error","Falta rellenar el campo contrase\xf1a"):this.notificationService.showNotification("error","Falta rellenar el campo usuario y el campo contrase\xf1a"),this.loginService.generateToken(this.loginData).subscribe(i=>{this.spinnerService.show(),i.token&&(this.loginService.loginUser(i.token),this.loginService.getCurrentUser().subscribe(n=>{n.active?(this.loginService.setUser(n),null==n.email?(this.router.navigate(["profile"]),this.loginService.loginStatusSubject.next(!0)):(this.router.navigate(["reporte"]),this.loginService.loginStatusSubject.next(!0))):(this.loginService.logout(),this.notificationService.showNotification("error","Usuario inactivo"))})),this.spinnerService.hide()},i=>{this.spinnerService.hide(),console.log(i),this.notificationService.showNotification("error","Credenciales incorrectas")})}formSubmitResetPassword(){""==this.recoverData.email||null==this.recoverData.email?this.notificationService.showNotification("error","Falta rellenar el campo correo"):this.recoverData.email.match(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?this.loginService.resetPassword(this.recoverData).subscribe(i=>{i&&(this.notificationService.showNotification("success","Se ha enviado un correo para restablecer la contrase\xf1a"),this.emailEnviado=!0)},i=>{this.notificationService.showNotification("error",i.error.message)}):this.notificationService.showNotification("error","Formato de correo incorrecto")}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}static#e=this.\u0275fac=function(n){return new(n||t)(e.rXU(v.J),e.rXU(u.H),e.rXU(f.D),e.rXU(p.Bq),e.rXU(m.Ix),e.rXU(m.nX))};static#i=this.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],standalone:!0,features:[e.aNF],decls:4,vars:2,consts:[[1,"auth-wrapper","d-flex","no-block","justify-content-center","align-items-center",2,"height","100vh"],[2,"background","url(assets/images/background/fondo-login.jpeg) no-repeat center center","background-size","cover","height","100%","width","100%"],["class","d-flex auth-box m-3 m-md-0","style","height: 50%;position: absolute;",4,"ngIf"],["class","d-flex auth-box m-3 m-md-0","style","position:absolute;",4,"ngIf"],[1,"d-flex","auth-box","m-3","m-md-0",2,"height","50%","position","absolute"],["id","loginform","class","align-self-center",4,"ngIf"],["id","recoverform","class","align-self-center d-block","style","position: relative;",4,"ngIf"],["class","boton-salir-recovered text-center",3,"click",4,"ngIf"],["id","loginform",1,"align-self-center"],[1,"d-flex","flex-column","text-center"],[1,""],["sizes","30px","src","assets/images/prueba.svg.png","alt","logo",2,"width","50%"],[1,"font-medium",2,"font-size","xx-large"],[1,"row"],[1,"col-12"],[1,"form-horizontal","mt-3",3,"ngSubmit"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"ti-user"],["name","username","required","","type","text","placeholder","Nombre de Usuario","aria-label","Username","aria-describedby","basic-addon1",1,"form-control",3,"ngModelChange","ngModel"],["id","basic-addon2",1,"input-group-text"],[1,"ti-pencil"],["name","password","required","","placeholder","Contrase\xf1a","aria-label","Password","aria-describedby","basic-addon1",1,"form-control",3,"ngModelChange","ngModel","type"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"mdi",3,"ngClass"],[1,"form-group","row"],[1,"col-md-12"],[1,"form-check","d-flex"],["type","checkbox","id","customCheck1",1,"form-check-input"],["for","customCheck1",1,"form-check-label","fs-3","ms-2"],["href","javascript:void(0)","id","to-recover",1,"text-dark","fs-3","ms-auto",3,"click"],[1,"fa","fa-lock","me-2"],[1,"form-group","text-center","mt-3"],[1,"col-xs-12"],[1,"btn","d-block","w-100","btn-lg","btn-primary"],["id","recoverform",1,"align-self-center","d-block",2,"position","relative"],["class","row",4,"ngIf"],["class","row mt-3",4,"ngIf"],[1,"logo","d-flex","flex-column","text-center"],["sizes","30px","src","assets/images/prueba.svg.png","alt","logo",2,"width","30%"],[1,"font-medium",2,"font-size","x-large"],[1,"col-12",3,"ngSubmit"],["name","email","required","","type","email","required","","placeholder","Correo",1,"form-control","form-control-lg",3,"ngModelChange","ngModel"],[1,"row","mt-3"],["type","submit","name","action",1,"btn","d-block","w-100","btn-lg","btn-danger"],[1,"col-11"],[1,"mdi","mdi-email-outline"],[1,"boton-salir-recovered","text-center",3,"click"],[1,"d-flex","auth-box","m-3","m-md-0",2,"position","absolute"],["class","row ",4,"ngIf"]],template:function(n,o){1&n&&(e.j41(0,"div",0),e.nrm(1,"div",1),e.DNE(2,k,4,3,"div",2)(3,w,3,2,"div",3),e.k0s()),2&n&&(e.R7$(2),e.Y8G("ngIf",!o.emailEnviado),e.R7$(),e.Y8G("ngIf",o.emailEnviado))},dependencies:[l.MD,l.YU,l.bT,g.M,a.YN,a.qT,a.me,a.BC,a.cb,a.YS,a.vS,a.cV],styles:[".boton-salir-recovered[_ngcontent-%COMP%]{position:absolute;width:30px;top:10px;right:10px;color:#000;cursor:pointer;border-radius:10%}.boton-salir-recovered[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:20px;font-weight:900}.boton-salir-recovered[_ngcontent-%COMP%]:hover{transition:.3s;background-color:#cdcdcd}"]})}return t})()}]}]}}]);